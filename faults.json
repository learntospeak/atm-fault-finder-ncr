[
  {
    "id": "s2_pickfail_empty_all_slots",
    "title": "S2: Empty cassettes reported as Pick Fail (all slots)",
    "models": [
      "NCR S2"
    ],
    "modules": [
      "Dispenser"
    ],
    "symptoms": [
      "Pick failure on empty cassettes",
      "Occurs in all positions",
      "Should read cassette empty"
    ],
    "match_keywords": [
      "pick fail",
      "empty cassette",
      "cassette empty",
      "all slots",
      "all positions",
      "dfm replaced"
    ],
    "likelihood": 0.6,
    "description": "Across all DFM bays, the controller reports pick failure instead of 'cassette empty'. DFMs and control board may test OK elsewhere.",
    "tags": [
      "all positions",
      "dfm replaced"
    ],
    "causes": [
      {
        "title": "Chassis backplane / sensor PCB fault (common path)",
        "context": "Backplane routes cassette-empty optical sensors and DFM signals to logic board. A cracked trace, oxidized connector, or broken ribbon causes misreads across all bays.",
        "checks": [
          "Remove DFMs; inspect backplane connectors J1\u2013J4 for bent/oxidized pins",
          "Clean optical empty/present flags under cassette throats; verify free movement",
          "Wiggle test sensor ribbon from throat sensors to backplane; watch in diagnostics",
          "Continuity check across backplane header for each slot"
        ],
        "fixes": [
          "Re-tension/clean connectors; replace damaged ribbon",
          "If persistent across all bays with known-good DFMs and logic board: replace dispenser chassis/backplane assembly"
        ]
      },
      {
        "title": "Firmware / XFS SP mismatch",
        "context": "Controller FW not aligned with APTRA/XFS SP may reinterpret 'empty' as timing/pick failure.",
        "checks": [
          "Compare dispenser firmware vs a known-good S2 in same site",
          "Check APTRA/XFS SP release notes for supported FW",
          "Run pick tests in Advance Diagnostics on empty cassettes"
        ],
        "fixes": [
          "Align controller FW and XFS SP to supported matrix"
        ]
      }
    ],
    "logs": [
      {
        "path": "C:\\\\ProgramData\\\\NCR\\\\XFS\\\\trace\\\\",
        "note": "Device init/status remap issues"
      },
      {
        "path": "Advance Diagnostics \u2192 Dispenser \u2192 Pick Test",
        "note": "Observe status on empty cassettes"
      }
    ]
  },
  {
    "id": "s1_lvdt1_ndt_null_high",
    "title": "S1: LVDT1/NDT \u2013 reference null too high",
    "models": [
      "NCR S1"
    ],
    "modules": [
      "Dispenser"
    ],
    "symptoms": [
      "LVDT null too high",
      "Diverter/Gate position out of range"
    ],
    "match_keywords": [
      "lvdt",
      "ndt",
      "null too high",
      "gate",
      "diverter"
    ],
    "likelihood": 0.55,
    "description": "The integrated LVDT+gate subassembly reports a baseline out of tolerance; no field calibration on S1.",
    "causes": [
      {
        "title": "Mechanical return issue (gate not homing)",
        "checks": [
          "Inspect diverter spring & hinge; ensure crisp return",
          "Check plunger link alignment; remove debris/dust",
          "Verify wiring continuity from LVDT to logic PCB"
        ],
        "fixes": [
          "Clean/repair mechanics",
          "Replace diverter/LVDT subassembly if still out-of-range"
        ]
      },
      {
        "title": "LVDT electrical drift/failure",
        "checks": [
          "Continuity test; measure sensor output (per service spec)"
        ],
        "fixes": [
          "Replace subassembly (no separate sensor calibration on S1)"
        ]
      }
    ],
    "notes": [
      "No field calibration available for S1 LVDT"
    ]
  },
  {
    "id": "sdm2_visible_in_atmdesk_not_aptra",
    "title": "SDM2: Visible in ATMdesk, missing in APTRA",
    "models": [
      "NCR SDM2"
    ],
    "modules": [
      "Depository / Recycler"
    ],
    "symptoms": [
      "Module detected in ATMdesk",
      "APTRA cannot see device"
    ],
    "match_keywords": [
      "atmdesk",
      "aptra",
      "xfs",
      "sp",
      "usb enumeration"
    ],
    "likelihood": 0.65,
    "description": "Hardware OK (ATMdesk sees device). APTRA depends on XFS Service Provider; missing/broken SP or USB enumeration drift prevents binding.",
    "tags": [
      "works in ATMdesk"
    ],
    "causes": [
      {
        "title": "XFS Service Provider not loaded or wrong type",
        "checks": [
          "Device Config Manager shows incorrect depository type",
          "XFS SP service not running or wrong version",
          "USB path/COM mapping changed after reboot"
        ],
        "fixes": [
          "Correct device type in DCM; repair/reinstall SP; re-enumerate USB"
        ]
      },
      {
        "title": "FW/SP version mismatch",
        "checks": [
          "Compare SDM2 FW vs supported SP matrix; test on known-good ATM"
        ],
        "fixes": [
          "Align FW and SP versions"
        ]
      }
    ],
    "logs": [
      {
        "path": "C:\\\\ProgramData\\\\NCR\\\\XFS\\\\trace\\\\",
        "note": "SP init failure details"
      },
      {
        "path": "ATMdesk functional tests",
        "note": "Prove hardware layer OK"
      }
    ]
  },
  {
    "id": "gbru_cr1s_cl1s_faults",
    "title": "GBRU: CR1S/CL1S sensor faults",
    "models": [
      "NCR GBRU"
    ],
    "modules": [
      "Recycler"
    ],
    "symptoms": [
      "Alignment/present faults at cassette entry",
      "High rejects"
    ],
    "match_keywords": [
      "CR1S",
      "CL1S",
      "bitmap",
      "alignment",
      "rejects"
    ],
    "likelihood": 0.45,
    "description": "Entry/left/right sensors at GBRU cassette interface misread due to dust, misalignment, or connector issues.",
    "causes": [
      {
        "title": "Sensor contamination or misalignment",
        "checks": [
          "Clean optical faces; verify flags move freely",
          "Run alignment test; compare bitmap transitions against service map"
        ],
        "fixes": [
          "Clean/realign; replace sensor block if repeatable"
        ]
      },
      {
        "title": "Harness/backplane connector issue",
        "checks": [
          "Inspect/retension connector; continuity test"
        ],
        "fixes": [
          "Repair/replace harness or PCB"
        ]
      }
    ]
  }
]